# SPDX-License-Identifier: GPL-2.0-or-later

if BOARD_AMD_ROME

config BOARD_SPECIFIC_OPTIONS
	def_bool y
	select SOC_AMD_COMMON_BLOCK_USE_ESPI
	select SOC_AMD_PICASSO
	select BOARD_ROMSIZE_KB_8192
	select DISABLE_SPI_FLASH_ROM_SHARING
	select DRIVERS_GENERIC_GPIO_KEYS
	select DRIVERS_I2C_GENERIC
	select DRIVERS_I2C_HID
	select HAVE_ACPI_TABLES
	select GOOGLE_SMBIOS_MAINBOARD_VERSION
	select PICASSO_CONSOLE_UART
	select PCIEXP_ASPM
	select PCIEXP_CLK_PM
	select PCIEXP_COMMON_CLOCK
	select PCIEXP_L1_SUB_STATE

config ELOG_BOOT_COUNT_CMOS_OFFSET
	int
	default 144

# FMDFILE is set here so that coreboot build picks up this flash map layout
# even when CHROMEOS is not selected when building upstream.
config FMDFILE
	string
	default "src/mainboard/\$(CONFIG_MAINBOARD_DIR)/chromeos.fmd"

config MAINBOARD_DIR
	string
	default "amd/rome"

config MAINBOARD_PART_NUMBER
	string
	default "rome"

config DEVICETREE
	string
	default "devicetree.cb"

config MAINBOARD_FAMILY
	string
	default "AMD_Rome"

config MAX_CPUS
	int
	default 8

config ONBOARD_VGA_IS_PRIMARY
	bool
	default n

config VBOOT
	select EC_GOOGLE_CHROMEEC_SWITCHES
	select VBOOT_LID_SWITCH

config VBOOT_VBNV_OFFSET
	hex
	default 0x2A

config CHROMEOS
	# Use default libpayload config
	select LP_DEFCONFIG_OVERRIDE if PAYLOAD_DEPTHCHARGE

config AMD_FWM_POSITION_INDEX
	int
	default 2

config DRIVER_TPM_I2C_BUS
	hex
	default 0x03

config DRIVER_TPM_I2C_ADDR
	hex
	default 0x50

config PICASSO_FW_A_POSITION
	hex
	default 0xFF031040
	depends on VBOOT_SLOTS_RW_AB && VBOOT_STARTS_BEFORE_BOOTBLOCK
	help
	  Location of the AMD firmware in the RW_A region. This is the
	  start of the RW-A region + 64 bytes for the cbfs header.

config PICASSO_FW_B_POSITION
	hex
	default 0xFF3CF040
	depends on VBOOT_SLOTS_RW_AB && VBOOT_STARTS_BEFORE_BOOTBLOCK
	help
	  Location of the AMD firmware in the RW_B region. This is the
	  start of the RW-A region + 64 bytes for the cbfs header.

config VARIANT_HAS_FW_CONFIG
	bool
	help
	  Honor FW_CONFIG in CBI.

config VARIANT_BOARD_VER_FW_CONFIG_VALID
	int
	default 256
	depends on VARIANT_HAS_FW_CONFIG
	help
	  Which board version did FW_CONFIG become valid in CBI.

config VARIANT_SUPPORTS_PRE_V3_SCHEMATICS
	bool
	default n
	help
	  Whether this variant supports pre-v3 version of schematics.
	  Eventually, when a variant moves to a point where it no
	  longer has to support pre-v3 schematics, `default y` entry
	  for it can be dropped.

config VARIANT_MIN_BOARD_ID_V3_SCHEMATICS
	int
	default 256
	help
	  Minimum board version where the variant starts supporting
	  v3 version of reference schematics.

config VARIANT_SUPPORTS_WIFI_POWER_ACTIVE_HIGH
	bool
	default n
	default n
	help
	  Whether this variant supports active high power enable for
	  WiFi. For pre-v3 schematics, this is always true. There are
	  some variants which used v3 schematics, but did not pick up
	  the change for active low WiFi power enable. Those variants
	  will have to set this config to true. Eventually, when a
	  variant needs to only support v3 schematics with active low
	  power enable for WiFi, `default y` entry for it can be
	  dropped.

config VARIANT_MIN_BOARD_ID_WIFI_POWER_ACTIVE_LOW
	int
	depends on VARIANT_SUPPORTS_WIFI_POWER_ACTIVE_HIGH
	default VARIANT_MIN_BOARD_ID_V3_SCHEMATICS
	help
	  Minimum board version where the variant starts supporting
	  active low power enable for WiFi.

config VBOOT_STARTS_BEFORE_BOOTBLOCK
	bool "PSP verstage"
	default y if VBOOT
	help
	  Firmware verification happens before the main processor is brought
	  online.

config VBOOT_STARTS_IN_BOOTBLOCK
	bool "X86 verstage (in bootblock)"
	depends on  VBOOT && ! VBOOT_STARTS_BEFORE_BOOTBLOCK
	select VBOOT_SEPARATE_VERSTAGE
	help
	  Firmware verification happens during the end of or right after the
	  bootblock. This implies that a static VBOOT2_WORK() buffer must be
	  allocated in memlayout.

endif # BOARD_AMD_ROME
